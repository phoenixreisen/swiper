(function (m) {
    'use strict';

    function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

    var m__default = /*#__PURE__*/_interopDefaultLegacy(m);

    var logo = "229f317da7f43ef5.svg";

    var Header = {
        view: function (_a) {
            var attrs = _a.attrs;
            var toggleNav = attrs.toggleNav;
            var _b = attrs, version = _b.version, url = _b.url, title = _b.title, tab = _b.tab;
            var _c = location, protocol = _c.protocol, host = _c.host, pathname = _c.pathname;
            var href = !url
                ? (protocol || '') + "//" + host + (((pathname === null || pathname === void 0 ? void 0 : pathname.length) > 1) ? pathname : '')
                : url;
            return (m__default['default']("article", { class: "phx-header" },
                m__default['default']("a", { href: href, target: tab || '_self', title: title || '' },
                    m__default['default']("picture", { class: "phx-header__logo" },
                        m__default['default']("img", { src: logo }))),
                version ?
                    m__default['default']("div", { class: "phx-header__version" }, version)
                    : '',
                toggleNav ?
                    m__default['default']("div", { class: "phx-header__nav-btn" },
                        m__default['default']("a", { href: "javascript:", title: "Navigation ein- & ausblenden", class: "phx-nav-btn noprint", onclick: function () { return toggleNav(); } },
                            m__default['default']("i", { class: "fas fa-bars" })))
                    : ''));
        },
    };

    var _getScrollOffset = function () {
        var _a;
        return window.scrollY
            || window.pageYOffset
            || document.body.scrollTop + (((_a = document.documentElement) === null || _a === void 0 ? void 0 : _a.scrollTop) || 0);
    };
    var _checkPosition = function (state) {
        var preVisibility = state.isVisible;
        if (state.$header) {
            state.isVisible = (_getScrollOffset() >= state.$header.offsetHeight);
            if (state.isVisible !== preVisibility) {
                m__default['default'].redraw();
            }
        }
    };
    var Topbar = {
        oninit: function (_a) {
            var state = _a.state;
            state.$header = null;
            state.isVisible = false;
        },
        oncreate: function (_a) {
            var state = _a.state;
            state.$header = document.querySelector('.header');
            window.addEventListener('scroll', _checkPosition.bind(this, state), true);
            window.addEventListener('touchmove', _checkPosition.bind(this, state), true);
        },
        view: function (_a) {
            var attrs = _a.attrs, state = _a.state;
            var backUrl = attrs.backUrl, faviconUrl = attrs.faviconUrl, faviconTarget = attrs.faviconTarget, name = attrs.name;
            var toggleNav = attrs.toggleNav, toggleAvatar = attrs.toggleAvatar;
            var isVisible = state.isVisible;
            return (m__default['default']("article", { class: "top-bar noprint " + (isVisible ? 'top-bar--visible' : '') },
                m__default['default']("div", { class: "wrapper wrapper--large" },
                    m__default['default']("div", { class: "top-bar__left" },
                        backUrl ?
                            m__default['default']("a", { href: backUrl, title: "zur\u00FCck", class: "top-bar__back-btn" },
                                m__default['default']("i", { class: "fas fa-arrow-left" }))
                            : '',
                        m__default['default']("a", { href: faviconTarget || 'https://www.phoenixreisen.com', title: "zur Startseite" },
                            m__default['default']("img", { src: faviconUrl || 'https://phoenixreisen.com/favicon.png', class: "top-bar__icon", alt: "" }),
                            m__default['default']("span", { class: "ml1" }, name))),
                    toggleAvatar ?
                        m__default['default']("article", { class: "top-bar__avatar noprint" },
                            m__default['default']("a", { href: "javascript:", class: "avatar-cta avatar-cta--topbar", title: "Service, Einstellungen & Optionen", onclick: function (e) { return toggleAvatar(e); } },
                                m__default['default']("i", { class: "fas fa-user avatar__symbol" })))
                        : '',
                    toggleNav ?
                        m__default['default']("a", { href: "javascript:", class: "nav-btn top-bar__nav-btn noprint", title: "Navigation ein-/ausblenden", onclick: function (e) { return toggleNav(e); } },
                            m__default['default']("i", { class: "fas fa-bars" }))
                        : '')));
        }
    };

    var toggleNav = function (state) {
        state.open = !state.open;
    };
    var Root = {
        oninit: function (_a) {
            var state = _a.state;
            state.open = false;
        },
        view: function (_a) {
            var state = _a.state;
            return ([
                m__default['default']('div', { class: 'wrapper wrapper--large' }, m__default['default'](Header, {
                    toggleNav: function () { return toggleNav(state); },
                    version: 'Beispiel f√ºr Header & Sticky Topbar',
                })),
                m__default['default'](Topbar, {
                    name: 'Phoenix Demo App',
                    backUrl: 'https://www.phoenixreisen.com',
                    toggleNav: function () { return toggleNav(state); },
                    toggleAvatar: function () { return toggleNav(state); },
                }),
            ]);
        },
    };
    m__default['default'].mount(document.querySelector('.example-app'), Root);

}(m));
